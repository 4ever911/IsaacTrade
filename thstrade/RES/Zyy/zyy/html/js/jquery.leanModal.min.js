// leanModal v1.1 by Ray Stone - http://leanmodal.finelysliced.com.au
// Dual licensed under the MIT and GPL

(function ($) {
	$.fn.extend({
		leanModal : function (options) {
			var defaults = {
				top : 100,
				overlay : 0.5,
				closeButton : null
			};
			options = $.extend(defaults, options);
			return this.each(function () {
				var o = options;
				$(this).click(function (e) {
					var modal_id = $(this).attr("href");
					$(".confirm_box").click(function () {
						close_modal(modal_id);
					});
					$(".close_sign").click(function () {
						close_modal(modal_id)
					});
					var modal_height = $(modal_id).outerHeight();
					var modal_width = $(modal_id).outerWidth();					
					var strImage = $(".switch").children("img.switch_test").attr('src');	
					var nSwitchStatus = ((strImage == "images/switch_on.png") ? 1 : 0);
					if (nSwitchStatus)
					{						
						$(modal_id).css({
							"display" : "block",
							"position" : "absolute",
							"opacity" : 0,
							"z-index" : 11000,
							"left" : 50 + "%",
							"margin-left" :  - (modal_width / 2) + "px",
							"top" : o.top + "px"
						});
						$(modal_id).fadeTo(200, 1);
					}
					else
					{
						$(modal_id).css({
							"display" : "none"
						})
					}
					
					e.preventDefault()
				})
			});
			function close_modal(modal_id) {
				$(modal_id).css({
					"display" : "none"
				})
			}
		}
	})
})(jQuery);
